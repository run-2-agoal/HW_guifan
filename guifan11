按照实际圆过孔的位置将方孔叠加到PCB本体上。
其余要求见Solid block的要求。	典型过孔的直径为13mil（0.33mm），孔壁镀铜厚度为1.4mil（35um），热过孔边缘的间距介于0.5～2mm

方法一主要是用于分析模型区域较小或芯片级仿真；
系统和单板级仿真中建议用方法二。
热过孔建模方法2	Solid block
 	把一定区域内的过孔和PCB本体共同等效为各项异形的Solid block。然后覆盖在整体PCB本体模型上。
材料特性设置为各向异形，其中平面法向导热系数较大；
Solid block平面方向的导热系数Kp等于PCB本体的Kp；
Solid block法向方向的导热系数Kn按公式（4）计算；
其余要求见Solid block的要求。	



信号层的综合导热系数根据该层铜皮覆盖率按下表取值：
信号层铜皮覆盖率	Kn   W/(m*K)	Kp   W/(m*K)
10%	40	0.33
20%	80	0.37
30%	119	0.43
40%	159	0.5
50%	238	0.75
其中： 为热过孔的外径， 为热过孔的孔壁镀铜厚度。
                                （3）
其中： 是铜的导热系数； 是热过孔壁面铺铜沿PCB法向的截面积； 是含热过孔的局部PCB面积； 是PCB本体法向的导热系数；N为PCB局部面积内热过孔数量。
 TEC 规范化建模方式
    TEC建模采用ICEPACK自带的标准化模型，路径为Marcos-Thermo electric cooler，包含两个子项：Run TEC及TEC，具体见下图所示：
 

    TEC子项 设置TEC的基本物理参数，包括整体尺寸、冷热面设定、初始工作电流、几何参数、材料等。
设置整体尺寸，包括TEC位置及整体物理尺寸，参数设置见下图：
 
    设置TEC冷热面，根据实际应用中冷热面的位置设定冷面位置，对应的另一面为热面，参数设置见下图：
 
    设置初始工作电流，具体大小可以根据实际使用中的温差、制冷功率来确定，参数设置见下图：
 
    设置几何参数，包含TEC素子对个数、TE素子高度、TE素子间距、TE素子面高比、陶瓷基板厚度。具体数值大小由供应商提供或通过实物测量获取。参数设置见下图：
 
    设置材料参数，包含TEC素子材料及基板材料。参数设置见下图：
 
    模型建立。基于以上设定，ICEPACK会建立一个TEC组件，具体如下图所示：
 
TEC组件模型示意图
    Run TEC子项 基于已建模的TEC，提供两种求解模式，即给定电流计算温度及给定温度求解电流，详见后文。二种求解模式都需给定素子材料参数，一般选择系统默认参数即可，具体如下图所示。
 
    给定电流计算温度求解模式（Specify I and Calculate T） 设置工作电流、面高比、素子对个数进行计算，可求解得已建模TEC在新指定条件下的温度及功耗。参数设置见下图：  
 
    给定温度计算电流求解模式（Specify T and Calculate I） 设置冷面温度、面高比、素子对个数进行计算，可求解得已建模TEC在新指定条件下的电流。参数设置见下图。具体电流数值可在计算文档xxx.tec_out中查看。
 
 PCM材料建模方式
PCM材料为相变材料，存在相变潜热和相变过程。仿真过程，由于材料的体积本身较小，忽略材料本身的体积变化和流动情况，材料的密度固定，重点为材料的比热与导热系数随温度变化。PCM材料的仿真方法为：
确定散热方案里PCM材料的结构尺寸，仿真建模时，建立与散热方案需求同样的模型尺寸及相对位置
根据材料的比热随温度变化，在ICEPACK定义材料的比热随温度的分段函数关系的属性，编辑比热与温度成Piecewise关系曲线，如下图所示。
 
某一实际PCM材料的比热与温度的关系，通过Graph edit进行编辑，PCM的比热与温度放置在Text格式文件，且温度与比热间至少有一个空格间隙，实际编辑效果如下图所示。
 
采用同种方法对导热系数进行设定。
物体放置于桌面的散热场景建模
 
散热评估需求：产品放置于无限大桌面上，评估产品的外壳温升
建模步骤：
1、根据产品实际外壳尺寸及外形，建立外壳模型及内部器件模型，并赋予外壳及内部各个部分及器件，相应的材料热物性参数及热耗信息；
2、确定产品采用的脚垫高度，用于确定产品与桌面的间距，建模时，可以简化脚垫的外形（如实际脚垫为圆柱，可以简化为立方体），但需要准确建立脚垫在外壳的位置及高度，并赋予相应的材料热物性参数；
3、在脚垫下方，建立一个长宽高的Block，该Block的长至少为产品长度的5倍，宽为产品宽度的5倍，厚度为桌子典型厚度25mm，且产品放置在该Block的正中位置。该Block用于模拟实际应用场景的桌子，该block的热物性参数为木头的热物性参数，且表面发射率建议设置为0.8。建模结果如下图所示。
 
4、其他设置与自然散热产品的设置方法一致



Fluent仿真工具使用规范化要求
规范化分析总流程图
 
Fluent规范化分析总流程图


规范化分析各子流程主要内容
R4.1. 1 各个规范化分析子流程的主要内容如下表所示
规范化分析子流程表
序号	规范化分析步骤	主要内容
1	明确分析目的，确定分析方法和抽取求解域	明确分析目的，分析模型所处散热条件，判断冷却方式，确定模型采用的散热方式（自然散热、强迫冷却、混合冷却）。很多情形下（如热交换器），我们并不能分析实际模型的全部，需要抽取待分析的求解域，通过设置恰当的边界条件，
2	建立仿真模型	1、利用Design Molder建模工具、或导入CAD模型，建立和实际求解要求相类似的求解模型
2、赋予模型各部件相应的热物性参数
3	网格划分，设置边界条件和求解参数，检查模型，设置观察点和观察区，再进行求解	1、根据建立的几何模型、优先使用六面体网格，在一些尺寸跨度大，结构复杂的模型使用四面体网格或者六面体四面体融合网格（需检查网格的质量和保型性）
2、设置和实际情况相同的边界条件，包括：进口流量、出口压力、Wall边界条件、计算域对称、周期性边界条件、各器件热耗等；
3、计算之前，用Check model、Check Caes等工具检查求解设置的正确性
4	收敛判断	求解结束后，根据残差曲线和观察点监控曲线判断计算是否收敛。当计算不收敛时，分析不收敛的原因，运用合理的收敛策略使计算收敛，得到合理的计算结果。
5	后处理和散热优化设计	1、对计算结果进行深入分析，根据分析目的得到需要的温度场分布、关键器件温度、流场分布、流阻、温升、动画、报告等。
2、根据计算结果，进行各种参数优化，得到最优设计方案
6	回归误差分析	根据功耗的实测结果，对模型进行回归仿真，量化分析误差原因，找出模型的改进点。
7	模型整理和归档	根据模型库操作要求对模型进行整理和归档，完善标准模型库。
适用范围:	系统级、单板级等所有热分析流程
 
Fluent建模要求
R 4.2.1 Fluent是一款通用性仿真设计软件，根据分析问题的不同，其仿真模型输入不同。因此，没有很标准化的建模规范。由于Fluent对网格质量要求高，网格划分困难。我们通常不能构建物理问题全局模型。需要把一个完整的物理系统分割出来，确认计算域的起始和结束位置。
R 4.2.2 Fluent不自带流体域构建功能。需要使用现有的固体CAD模型，从固体域中抽取流体域。或者直接创建流体几何模型。
R 4.2.3 尽可能简化几何模型去除可能引起复杂网格的不必要特征（倒角、焊点等）。
R 4.2.4 对于对称或周期性物理问题，需要使用对称和周期性边界条件简化模型。
网格划分规范化要求
R4.3.1 网格必须能捕捉感兴趣的几何特征，以及关心变量的梯度，如速度梯度、压力梯度、温度梯度等。
R4.3.2 对沿着结构方向的流动，四边形对沿着结构方向的流动，四边形/六面体网格和三角形/四面体网格相比，能用更少的单元/节点获得高精度的结果。
 
四边形/六面体网格示意图
R4.3.3 对复杂几何，四边形/六面体网格没有数值优势，你可以使用三角形/四面体网格或混合网格来节省划分网格的工作量。
 
三角形/四面体网格示意图
R4.3.4 混合网格一般使用三角形/四面体网格，并在特定的域里使用其他类型的单元。例如，用棱柱型网格捕捉边界层比单独使用三角形/四面体网格更有效。
 
棱柱型网格示意图
边界条件设置规范化要求
R4.4.1 要确定一个有唯一解的物理问题，必须指定边界上的流场变量。如指定进入流体域的质量流量、动量、能量等。定义边界条件包括: 确定边界位置，提供边界上的信息。
R4.4.2 如果可能，边界的位置和形状能保证流体或者进入流体域，或者流出流体域。垂直边界的方向不应该有大的梯度。减少近边界的网格扭曲度。
边界条件的分类与定义：
 
1、流体域（fluid）
流体域是一系列单元的集合，在其上求解所有激活的方程。需要选择流体材料，对多组分或多相流，流体域包含这些相的混合物。
 

2、固体域（solid）
固体域是一组只求解导热问题而不求解流动方程的单元集合。只需要输入材料名称。选择项允许输入体积热源。如果临近固体域的单元是旋转周期边界，需要指定旋转轴。可以定义固体域的运动。
 
3、多孔介质（Porous Media）
多孔介质是一种特殊的流体域。用来模拟通过多孔介质的流动，或者流过其他均匀阻力的物体。
 
4、速度进口（velocity inlet）
指定速度（速度大小和分量，垂直入口方向分量）。指定入口均匀速度分布。如用UDF或者分布文件，可以指定分布入口条件。速度入口用于不可压流动，不建议用于压缩流。速度大小可以是负值，意味着出口。
 
5、压力进口（pressure inlet）
压力入口适用于压缩和不可压缩流。
 
    6、流量入口（Mass-Flow inlet）
流量入口是为可压缩流设计的，但也可以用于不可压流动。调整总压以适合流量入口，比压力入口更难收敛。
 
7、压力出口（pressure outlet）
适用于压缩和不可压流动。如果流动在出口是超音速的，指定的压力被忽略。在外流或非封闭区域流动，作为自由边界条件。对理想气体（可压缩）流动，可以使用无反射出口边界条件。
 
8、壁面边界条件（Wall）
粘性流动中，壁面采用无滑移边界条件，可以指定剪切应力。注意选择热边界条件。对湍流可以指定壁面粗糙度。壁面可以设置平移或旋转速度。
 
9、对称面（symmetry）
不需要输入。流场和几何都需要是对称的。
 
10、周期边界条件（periodic）
用来减少全局网格量。流场和几何必须是旋转周期对称或平移周期对称。
 
11、内部边界面
只在单元的面上定义，内部边界面的厚度为零，内部边界面上的变量可以突变。用来实现下面一些物理模型:风扇、散热器、多孔突变区域（相比多孔介质模型更容易收敛）、内部面。
求解器设置规范化要求
FLUENT中有两种求解器–压力基和密度基。压力基求解器以动量和压力为基本变量。压力基求解器有两种算法：分离求解器–压力修正和动量方程顺序求解；耦合求解器(PBCS) –压力和动量方程同时求解。密度基耦合求解器以矢量方式求解连续性方程、动量方程、能量方程和组分方程。通过状态方程得到压力。其他标量方程按照分离方式求解。
R4.5.1 压力基求解器应用范围，覆盖从低压不可压缩流到高速压缩流。
R4.5.2 压力基耦合求解器(PBCS) 适用于大多数单相流，比分离求解器性能更好。不能用于多相流（欧拉）、周期质量流。
R4.5.3 密度基耦合求解器(DBCS)适用于密度、能量、动量、组分间强耦合的现象。例如: 伴有燃烧的高速可压缩流动，超高音速流动、激波干扰。
R4.5.4 隐式方法一般优于显式，因为其对时间步有严格的限制。
R4.5.5 显式方法一般用于流动时间尺度和声学时间尺度相当的情况。（如高马赫激波的传播）  
R4.5.6 计算收敛时应该满足：所有离散的守恒方程（动量、能量等）在所有的单元中满足指定的误差或者结果随计算不再改变。全局的质量、动量、能量和标量达到平衡。
R4.5.7 使用残差历史曲线来监测收敛：一般地，残差下降三个量级表示至少达到定性的收敛，流场的主要特征已经形成。压力基求解器的能量残差应下降到10-6。
 
压力求解器残差曲线
R4.5.8 使用检查全局热和质量平衡来监测收敛：净通量差值（Net Results）应该小于通过边界最小通量的1%。
  

R4.5.9 如果监测到求解已经收敛，但计算结果还在改变，或还有大的质量/热量不平衡，这表示求解还未收敛。
R4.5.10 收敛遇到困难的解决方法：确保问题是物理合理的；用一阶离散格式计算一个初场；对压力基求解器，减少发散方程的松弛因子；对密度基求解器，减少Courant 数；重新生成网格或加密质量差的网格。
R4.5.11 收敛的结果不一定是正确的。需要利用其他数据或物理知识对结果进行检查和评价。确保结果是网格无关的（用自适应加密网格或重新划分网格来研究网格无关性）。
R4.5.12 如果流场结果看起来不合理: 重新考虑物理模型和边界条件；检查网格质量，如必要，重新划分网格；重新考虑边界条件或域的位置，不充分的边界对结果精度影响很大。
湍流模型描述与总结












湍流模型描述汇总表
 
 
UDF简介与案例
UDF简介
UDF 是用户自己用C语言写的一个函数，可以和FLUENT动态链接。用来定制边界条件，源项，反应速率，材料属性等；定制物理模型；用户提供的模型方程；调整函数；执行和需求函数。
可以使用UDF的位置如下图所示：
 
UDF嵌入位置示意图
1、UDF的数据结构
在UDF中，体域和面域通过Thread数据类型获得。Thread是FLUENT 定义的数据类型。
 
DUF数据结构示意图
为了在thread (zone)中获得数据，我们需要提供正确的指针，并使用循环宏获得thread中的每个成员(cell or face)
cell_t声明了识别单元的整型数据类型。face_t声明了识别面的整型数据类型。
 
 
DUF数据类型示意图

2、几个经常用到的循环宏为：
对域d中所有单元thread循环:thread_loop_c(ct,d) { }
对域d中所有面thread循环:thread_loop_f(ft,d) { }
对thread t中所有单元循环：
begin_c_loop(c, t)
{…}
end_c_loop(c,t)
对面thread中所有面循环
begin_f_loop(f, f_thread)
{ …}
end_f_loop(f, f_thread)





UDF案例
1、问题描述：
 
DUF案例示意图
2、准备源代码：
 
3、编译或者解释UDF：
注意只有在没安装C编译器时使用解释方式
 
4、在FLUENT GUI中hook UDF：
 





5、运行：
 
6、结果：
 
DUF案例计算速度矢量图
瞬态问题分析流程
1、激活瞬态求解器
在General菜单下选择Transient按钮:
 
瞬态模型选择：
 
R4.8.1.1 Δt 必须小到能解析和时间相关的特征。确定每个时间步的最大迭代步内能收敛。
R4.8.1.2 时间步大致可按照下面公式估计:
 

R4.8.1.3 在指定脉动周期的情况下，也可以选择能解析流动特征的时间步。
R4.8.1.4 对许多瞬态流动，PISO格式有助于加速收敛。
2、瞬态流动模型动画设置
R4.8.2.1 必须在计算前设置动画。
 
3、执行迭代
 
R4.8.3.1 必须定义初始化。设置流体域的初始质量和流场的初始状态。
R4.8.3.2 非迭代时间推进法(NITA) 可以用于更快速的计算时间。
4、收敛行为
R4.8.4.1 瞬态计算的残差图不一定能说明收敛。时间步长的选择应该使得在一个时间步长内残差下降三个量级，这将确保瞬态行为被解析。
R4.8.4.2 每个时间步的迭代次数大约20次，减少时间步长比增加每步的迭代次数要好。
 
Fluent瞬态分析迭代曲线
后处理
Fluent自带的后处理功能有：创建面；显示类型；着色选项；求解数据的显示；通量报告和积分计算。
 
后处理函数一般在面上操作，Fluent可以自动生成面，也可以由用户产生。可以对面改名，删除或移动，写出面上的变量到文件。
1、创建面
Zone surfaces (求解器自动从域中创建)
Plane surfaces (指定域中一个特定的平面)
Iso-surfaces (对指定变量有固定值的面)
Clipping Surfaces (特定角度内的等值面)
Point surfaces (域中一个特定的位置)
Line and Rake Surfaces (用于显示颗粒迹线)
2、后处理着色选项
着色选项允许你控制后处理图片的表现方式: 视图和显示选项；云图/矢量图的颜色；；在面上打光；注释；面操作；使用重叠、不同的颜色、打光、透明等混合的方式；动画。
 
3、绘图
FLUENT 提供绘制结果数据的工具:求解结果的XY图；显示脉动频率的历史图；快速傅立叶变换(FFT)；残差图。
可以修改颜色、标题、图标、轴和曲线属性
其他数据文件（试验、计算）也可以读入以便比较
  
Fluent计算结果绘制数据图
4、报告
通量报告：净通量；包括辐射在内的总换热率。
 

5、面积分
由于差值，在用户生成的面上会有小量的误差。
 
Fluent仿真案例
RRU仿生齿案例
我们要计算的问题如图所示，室外射频拉远单元RRU，三个模块采用左右级联安装方式，通过自然散热，每个模块尺寸为400*300*100mm，左右级联间距为20mm，模块前面板有10mm高护齿，垂直方向高400mm。我们要计算斜齿的流场分布，并且与仿生齿模型做比较。
 
RRU Fluent 仿真模型图
1、仿生齿几何建模
确定好模块所有几何尺寸以后遵从从外向内建模的思路，散热器基板选定好XY面，仿生齿选择YZ平面，在草图sketching选项中有Draw, Modify, Dimensions, Constraints,Settings 五个选项。
 
1）通过line建出仿生齿副齿的几何，然后点击Dimensions中的General 命令对仿生齿副齿的几何尺寸进行标注限制，如图所示。
 
2）在Modeling 中鼠标右键点击插入Extrude功能，如图所示。在Operation中选择Add material,具体拉伸尺寸和方向在Details View中设置，如图所示
 
 
3）在Modeling 中鼠标右键点击插入pattern功能，阵列的方向与间距在Details View中设置，如图所示。
 
                                                                                        
4）在Modeling 中鼠标右键点击插入平面功能，通过平移获得建主散热齿的平面，尺寸标注后如图所示。在Modeling 中鼠标右键点击插入extrude功能得到如图所示的几何。
            
5）在Modeling 中鼠标右键点击插入pattern功能，阵列的方向与间距在Details View中设置，如图所示，同样的方法得到仿生齿盖板与散热齿基板。
 
6）在散热齿基板同一平面内建芯片的凸起部分，如图所示。
        
7）遵从外向内的方法最终得到的RRU拼装模型如图所示。
 
    8）后进风斜齿建模。
后进风斜齿建模过程与仿生齿建模很类似，但是斜齿的轮廓可以超出基板的尺寸，如图所示，这样有两个优点：
	斜齿的几何参数互相影响较少，改变其中几条斜齿的倾斜角度不会造成几何的混乱
	通过基板轮廓切割斜齿以后，可以出现尽可能少的锐角，减小网格划分的难度
    
拉伸后的斜齿如图所示，然后根据根据需要建盖板，最终得到的几何如图所示。
 
2、网格划分
1）在designmdeler 模型建完以后，右键单击insert下拉菜单中选择enclosure，如图所示。设定一个计算域，计算域的大小与在details view 中设置，该模型中模型底部0.6m，顶部1.6m，前后左右均设为0.6m。
 
2）由于仿生齿与后进风齿都有副齿因此在副齿区域建一个网格划分用box1，类似于Flotherm中region的网格功能，如图所示，再建一个与整个模块同等大小的box2用来控制RRU整个模块的尺寸，如图所示，由于自然散热模块顶部流速较高，因此在RRU整个模块周围再建一个box3来控制顶部的网格，如图所示。
       
3）进入到mesh 界面后，鼠标右键单击insert下拉菜单的sizing 功能，如图所示，在设置项中geometry选择所有几何体，type中选择body of influence， element size选择1mm，即表示副齿区域最小几何尺寸为1mm.
    
4）在mesh中设置box2与box3的控制参数，根据网格要求可以调整element size。
5）在named selections 中右键选择insert ，named selection功能，如图所示。选择tim材料与过孔等小尺寸器件，然后再mesh中的face size 中选择named selection功能来控制小尺寸器件的几何参数，如图所示。
  
6）在顶部菜单栏中点击generate mesh 生成网格，检查网格质量合格以后点击菜单栏中的update保存生成好的网格。
3、边界条件设置
边界条件设置可以在Fluent界面中的boundary condition中设置，也可以通过编制的程序自动设置，最终的计算结果相同，下面主要介绍程序设置方法。
1）由于RRU拼装模块边界条件很多，因此编制了一个程序对边界条件自动复制，首先在记事本文件中对每个器件名称进行导热系数的设定，如图所示，左面表示器件名称，右边表示各器件的导热属性。
    
2）在workbench 工作界面 setup 右键下来菜单中选择reset功能，reset以后双击setup出现Fluent 调用窗口，在options选项中选择double precision.如图所示。
 
3）在Fluent 属性框中输入 define boundary-conditions list-zones命令，拷贝所有产生数据至记事本文件的zone list 中，如图下图所示，然后运行Geany 程序如图所示。
 
 
4）运行完Geany 程序以后产生一个jou file,在Fluent界面中read 功能中录入该文件，即完整的对模块的边界条件进行了设置。
4、计算
在boundary conditions 中核对边界条件设置是否正确，然后在run caculation 中设置结算步数，如图所示。
 
5、结果处理
在保存文件对应文件夹下找到监控点的输出数据，用记事本打开读取monitor中所需数据。
热交换芯案例
我们要计算的问题如图所示，是一款热交换芯的内循环、外循环的翅片。翅片厚度0.15mm，翅片间隙1.95mm。热交换芯整机尺寸358（H）*450（W）*77（D）。我们要通过优化热交换芯内外循环翅片的型面，达到最佳的散热效果。
 
热交换芯Fluent仿真模型

热交换芯建模
建模前先进行模型简化和模型抽取。
1、模型简化
暂时不考虑内外循环翅片与外循环翅片在侧边L型的打胶压边，抽取主要特征尺寸。
2、模型抽取
根据模型流体分析情况，将模型分为翅片（固体）和间隙（流体）。
结合几何特征关系，分别建模。
	翅片（固体）——内外循环翅片，采用钣金凸模的建模思路，先建模具，再建翅片钣金。
	间隙（流体）——内外循环流道，采用实体建模思路，利用翅片钣金，抽取间隙流体模型。
本案例介绍的建模方法是采用Proe建模，然后转化为step通用格式再导入MESH画网格。用proe进行建模可以方便复杂型面的构建。
1、建立翅片凸模模具底座
翅片凸模模具是用来建立翅片的，模具底座的设计建议与翅片的大小一致。高度建议去20mm，方便后续凸模操作。
 
2、在凸模模具底座上设置基准线和基准面，来标定型面设计的凸包或者流道的位置
 
3、在标定的位置建立凸包模型或者流道模型
 
凸包建立方法流程如下：
a）点击proe菜单栏“插入”-> “混合”-> “伸出项”，选择凸模模具底座的上表面为草绘平面
  
b）根据草绘工具，建立凸包的底面和顶面
注意先画底面（如下图黄色椭圆），画完之后鼠标右键选择“切换截面”再画顶面（如下图黑色椭圆）。
 
c）确定伸出项方向和深度，完成凸包建模。
深度为间隙高度1.95mm。
  
4、按照类似方法在整个凸模底座上完成凸包或者流道建模
流道建立方法预凸包一直，凸包是椭圆伸出项，流道是弧形和矩形伸出项。
 
5、建立翅片钣金件
新建钣金件，完成草图设计，钣金厚度选择0.15mm。
 
 
6、通过凸模底座，对翅片钣金件进行凸模操作，完成翅片建模
选择下图右下方的凸模，然后在上方的对话框中选择已经建好的凸模底座，对齐翅片钣金件，完成翅片建模。
 
 
7、建立间隙流体初始模型
采用拉伸的方法建立流体初始模型实体，拉伸高度为1.95mm。
 
8、通过“实体凸模”的方法，完成间隙流体建模
a）点击proe菜单栏“插入”-> “共享数据”-> “合并/继承”，
 

b）和上对话框中选择之前建好的翅片凸模底座文件，再将凸模底座与流体间隙对齐 
c）对齐操作确认后完成间隙流体建模
 
9、依据同样的方法可以完成内外循环翅片以及内外循环流体间隙的建模
10、将内外循环翅片以及内外循环流体间隙的模型导出为step格式，导入DesignMolder
 
 11、在间隙流体模型中切割出流体进出口
a）建立间隙流体进出口面边界线
利用translate功能，将边线复制到进出口边界线处，生成边界线。
 
b）以边界线为分割线，将间隙流体侧面切割成进出口面。
Target face选择流体侧面，target geometry选择上一步生成的边界线。
 
 
c）依照上述方法依次生成内外循环的间隙流体进出口面。
12、设定边界条件名称
从named selection里面选择已经生成的内外循环间隙流体进出口面，以及内循环流体中间换热的交界面，定义为边界。
 
划分网格
以sweep的方法为原则，以面到线，再成体的原则。
设置间隙流体的底面网格尺寸，设置合适的element size
 
设置间隙流体的厚度网格尺寸，设置合适的element size
 
在顶部菜单栏中点击generate mesh 生成网格，检查网格质量合格以后点击菜单栏中的update保存生成好的网格。
 
启动Fluent，边界条件设置
边界条件设置可以在Fluent界面中的boundary condition中设置，也可以通过编制的程序自动设置，最终的计算结果相同，下面主要介绍程序设置方法。
1.选择计算模型，选择能量方程和k-epsilon方程
 
 
2.选择流体和固体的材料，选择流体为air，固体为aluminum
 
3.设置内外循环间隙流体的体边界条件
 
4.设置内外循环间隙流体的进出口面边界条件
间隙流体进口选择速度进口边界条件，进口速度和温度根据研究去设计。
  
间隙流体出口选择压力出口边界条件
 
5.设置内外循环换热面边界条件
 
计算
选择计算步数，开始计算。在计算之前，先检查下网格质量和边界条件，避免出现计算错误。
 
结果处理
1）在保存文件对应文件夹下找到监控点的输出数据，用记事本打开读取monitor中所需数据。
2） 使用后处理功能去查看流场和温度场。

液冷散热器案例
我们要计算的问题如图所示，是一款液冷铲齿散热器，翅片厚度为0.15mm，翅片间隙为0.2mm，散热器尺寸为108*82*11，前后汇流腔体的尺寸为5mm，基板厚度3.5mm。我们要通过优化翅片的尺寸和数量，达到最佳的散热效果。
 
液冷散热器Fluent仿真模型
	模型简化
暂不考虑安装螺钉等的影响，抽取主要的特征尺寸。
将实际散热器简化成长方体的模型进行分析。
	模型抽取
根据建模的实际情况，将模型分为基板、翅片、顶盖、冷却液腔体、进出水口等几个部分。
结合几何特征关系，分别建模。
	基板——散热器基板，主要采用拉伸的方式进行建模
	翅片——建立翅片特征尺寸，采用阵列的方式进行建模
	顶盖——散热顶盖，铜材质或者PPS材质，要采用拉伸的方式进行建模
	冷却液腔体——采用拉伸建模，注意的是主要通过Boolean的方式进行抽取，需要特别注意的是翅片和冷却液采用Boolean运算以后，为一个整体形状，还需要通过特征面等方式再次进行Boolean运算，进行切割
	进出水口——一般采用拉伸进行建模，但是，有时候根据实际的结构尺寸，特征面需要异形处理，方便仿真冷板的实际压降
	建模顺序和原则：
所有几何尺寸以后遵从“从外向内，切削分块”建模的思路
建模过程
1、更改特征长度为毫米（Millimeter）
 
2、选定基准面，插入特征面
散热器基板选定好ZX面作为基准面，点击“Sketch”建立特征面，进行基板和顶盖的特征尺寸建模，在草图sketching选项中有Draw, Modify, Dimensions, Constraints,Settings 五个选项。
 
3、基于“Rectangle”特征尺寸优化模型建立方形特征尺寸，建立草稿特征面
  
	将特征放置在坐标轴中点
	特征尺寸放置在中点
  
	将划分点放置在坐标轴上，先选择点，然后选择坐标轴
  
	建立等长线
    
	建立特征长度
  
设定特征长度尺寸，H2=108mm，V1=84mm
 
4、建立特征体
在Modeling 中鼠标右键点击插入Extrude功能，如图所示。在Operation中选择Add Frozen,具体拉伸尺寸和方向在Details View中设置，如图所示
  
5、采用同样的特征面，建立上盖的模型。
 
注意，顶盖和基板通过坐标轴yz，可以朝上↑和朝下↓分别建立特整体。
 
 6、采用同样的方法建立流动腔体的特征体
流动散热腔的主要特征尺寸：
 
模型尺寸
 
注意：建模完成后，将流体特性更改为”Fluid“。
 
	建立翅片模型
翅片模型可以有两种方式，一种方式通过在xy面上面建立特征值，然后拉伸。
 

 
8、也可以通过Box建立特征尺寸。其特征如下
 
 
9、采用阵列的方式建立其他的翅片
 
分别向两个方向阵列。
 
 
10、建立新的坐标系，准备进出水管的建模
	建立新的坐标系
将鼠标放置在进口的前端，然后选择 ，建立新的坐标系，方便进行特征建模。
 

	根据进出水口的相对位置，进行建模。以原点为中心，确定进口的相对位置。
  
	非对称拉伸特征尺寸
 
	如果进口存在不同的特征尺寸，采用同样的方法建立特征尺寸
  
	特征拉伸后，采用移动的方式将特征体移动到对应的位置
  

11、采用镜像的方式，选择“XYPlane”坐标，建立出水口的特征尺寸，如果位置需要调整，可以通过移动的方式，将特征值移动到相应的位置
  
12、建立分割面，选择“Surfaces From Faces”，建立分割面
 

 
14、根据特征需要，将分割面阵列或者镜像，并移动到相应的分割的位置
15、进行Boolean运算，将冷却流体和固体界面进行分割。
根据从大套小的原则，将特征体进行分割。
 
注意：对于流体进行Boolean运算时，需要保留冷却流体的特征体。
 
16、依据同样的方法，建立热源的特征体
网格划分
	 设定边界条件
 
根据进出水口和热源面积，设定相关的边界面。
 
	划分网格的基本原则：
进出水管——Sweep方式建立，先定义“Face Sizing”，再根据不同的体设定网格大小
 
常规基板、热源等——直接定义网格大小，先选择特征体，
 
 

	采用Sweep方式示例
	先定义“Face Sizing”，可以同时选中多个特征面
选中特征面，并作为起始面
 
手动输入特征尺寸的大小。
 
	建立体特征，
选择上一步的“Face Sizing”中的面作为特征面，手动设定需要划分的网格的层数。
 
	依据同样的方法，完成其他特征尺寸的网格划分
	在顶部菜单栏中点击generate mesh 生成网格，检查网格质量合格以后点击菜单栏中的update保存生成好的网格。
 

启动Fluent，边界条件设置
边界条件设置可以在Fluent界面中的boundary condition中设置，也可以通过编制的程序自动设置，最终的计算结果相同，下面主要介绍程序设置方法。
	选择计算模型，选择能量方程和k-epsilon方程
 

 
	根据流体特性选择各器件的属性。
 
 
	设定流体速度、热流密度等边界条件
	进口流速，温度可以设置为323K
 
	热流密度
 
 

计算
在boundary conditions 中核对边界条件设置是否正确，然后在run caculation 中设置结算步数，如图所示。
 
结果处理
在保存文件对应文件夹下找到监控点的输出数据，用记事本打开读取monitor中所需数据。

参考文献
制定本规范参考的文献如下

序号 No.	             文献名称
1	                    Flotherm热分析软件操作指导书
2	                    Flotherm规范化使用指导书
3	                    Flotherm帮助
4.	                    Flotherm模型归档规范
5	           Ansys Icepack电子散热基础教程
6	           Ansys Icepack培训教程
7	           Ansys Icepack软件帮助文件
8                                     	           Fluent培训教程
9                                  	           Fluent heat transfer
附录
仿真平台操作指导 
仿真平台登录
（1）仿真平台登录地址
http://10.44.165.32:8086/pbsworks/ui/framework/login/login.html?redirectURL=/ui/cm/cm.html?appId=2
（2） 仿真平台登录用户名及密码：
用户名：姓名首字母+8位工号；密码：123456
  备注：新员工需增加云平台使用权限方可使用；换工号后可以采用原账号登录，也可增加新账号权限使用，开通权限请联系提召尧t00286173
仿真平台基本功能介绍及操作指导
1、监控窗口
 
2、作业提交
 
备注：
Flotherm软件上传pdml格式文件；
Icepak软件上传pdml格式tzr文件
fluent软件上传cas格式文件
ANSYSMechanical软件上传inp格式文件
Starccm软件上传sim格式文件
 
3、作业下载
 
4、其他操作
1）筛选监控窗口显示内容
 
2）Flotherm监控残差曲线操作指导
 
3）Flotherm终止任务生成pack文件
 
4）Icepak结果打包压缩指导
